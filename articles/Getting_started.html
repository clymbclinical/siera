<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • siera</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">siera</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Getting_started.html">Getting Started</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/clymbclinical/siera/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/clymbclinical/siera/blob/main/vignettes/Getting_started.Rmd" class="external-link"><code>vignettes/Getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>Getting_started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://clymbclinical.github.io/siera/">siera</a></span><span class="op">)</span></span></code></pre></div>
<p>We will use two examples to get started:</p>
<ol style="list-style-type: decimal">
<li>Using the original <em>CDISC Common Safety Displays</em> ARS
metadata (JSON format, with example operations handled in the
<code>readARS</code> function)</li>
<li>Using a modified <em>CDISC Common Safety Displays</em> ARS metadata
(xlsx format, with example dynamic AnalysisMethodCodeTemplate R code
handling operations, based on functions from the <code>cards</code>
package)</li>
</ol>
<p>In order to facilitate the examples, <em>siera</em> includes several
example files, which we use throughout the documentation. These include
a JSON ARS file, as well as some csv ADaMs (ADSL and ADAE) which can be
run with the R scripts produced by readARS function. Use the helper
ARS_example() with no arguments to list them or call it with an example
filename to get the path.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To see a list of example files:</span></span>
<span><span class="fu"><a href="../reference/ARS_example.html">ARS_example</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ADAE.csv"                           "ADSL.csv"                          </span></span>
<span><span class="co">#&gt; [3] "ADVS.csv"                           "ARS_V1_Common_Safety_Displays.json"</span></span>
<span><span class="co">#&gt; [5] "cards_constructs.xlsx"              "Common_Safety_Displays_cards.xlsx" </span></span>
<span><span class="co">#&gt; [7] "test_cards.json"</span></span>
<span></span>
<span><span class="co"># A temporary path to a specific file:</span></span>
<span><span class="fu"><a href="../reference/ARS_example.html">ARS_example</a></span><span class="op">(</span><span class="st">"ARS_V1_Common_Safety_Displays.json"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/siera/extdata/ARS_V1_Common_Safety_Displays.json"</span></span></code></pre></div>
<div class="section level2">
<h2 id="cdisc-example-json-format">CDISC example: JSON format<a class="anchor" aria-label="anchor" href="#cdisc-example-json-format"></a>
</h2>
<p>To get started with an example of ingesting the ARS JSON metadata,we
will ingest the example JSON ARS file to meta-programme ready-to-run R
scripts, which will produce the ARDs.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Path to the the ARS JSON File. </span></span>
<span><span class="va">json_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ARS_example.html">ARS_example</a></span><span class="op">(</span><span class="st">"ARS_V1_Common_Safety_Displays.json"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Path to a folder which will contain the meta-programmed R scripts (feel free to update </span></span>
<span><span class="co"># to a more suitable path)</span></span>
<span><span class="va">output_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this folder contains ADaM datasets to produce ARD (we will use temporary </span></span>
<span><span class="co"># directory tempdir(), but feel free to download the ADaMs required and use the location they are stored in.</span></span>
<span><span class="co"># This can be done with e.g. dirname(ARS_example("ADSL.csv"))</span></span>
<span><span class="va">ADaM_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run the readARS function with these 3 parameters.  This creates R scripts (1 for each output in output_folder)</span></span>
<span><span class="fu"><a href="../reference/readARS.html">readARS</a></span><span class="op">(</span><span class="va">json_path</span>, <span class="va">output_folder</span>, <span class="va">ADaM_folder</span>, example <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once the R programs are created, they can be individually run,
provided that the ADaM datasets are in the location as provided to the
readARS function.</p>
</div>
<div class="section level2">
<h2 id="cdisc-example-xlsx-format-with-cards-functions-to-handle-operations">CDISC example: xlsx format, with <code>cards</code> functions to
handle operations<a class="anchor" aria-label="anchor" href="#cdisc-example-xlsx-format-with-cards-functions-to-handle-operations"></a>
</h2>
<p>Before starting out with this example, it would be helpful to first
have a discussion on the composition of the ARS metadata (the xlsx
representation, in particular), and the use of <code>cards</code>
functions.</p>
<div class="section level3">
<h3 id="reading-in-excel-ars-metadata---what-to-expect">Reading in Excel ARS metadata - what to expect<a class="anchor" aria-label="anchor" href="#reading-in-excel-ars-metadata---what-to-expect"></a>
</h3>
<p>The ARS metadata represented in Excel contains all ARS information
for the Reporting Event. It is divided into Excel Worksheets, roughly
mapped/equivalent to the official JSON ARS representation and its
classes (an example can be found <a href="https://github.com/cdisc-org/analysis-results-standard/blob/main/workfiles/examples/ARS%20v1/Common%20Safety%20Displays.json" class="external-link">here</a>).
For the purpose of automating Analysis Results using <em>siera</em>, a
subset of the multiple Excel Worksheets contain the key information.
These include:</p>
<ul>
<li>
<em>MainListOfContents</em> (links outputs to their respective
analyses)</li>
<li>
<em>OtherListsOfContents</em> (contains Output metadata)</li>
<li>
<em>DataSubsets</em> (filters data for individual analyses)</li>
<li>
<em>AnalysisSets</em> (filters data to get the Population Set for
the Output)</li>
<li>
<em>AnalysisGroupings</em> (groups data according to analysis
specifications)</li>
<li>
<em>Analyses</em> (contains linking information to all components
required for calculation of results)</li>
<li>
<em>AnalysisMethods</em> (describes operations to be performed on
data to get results)</li>
<li>
<em>AnalysisMethodCodeTemplate</em> (contains dynamically written R
code to perform AnalysisMethod)</li>
<li>
<em>AnalysisMethodCodeParameters</em> (populates
AnalysisMethodCodeTemplate with Analysis information)</li>
</ul>
</div>
<div class="section level3">
<h3 id="a-note-on-example-code-used-in-analysismethodcodetemplate-using-cards-package">A note on example code used in AnalysisMethodCodeTemplate: using
“cards” package<a class="anchor" aria-label="anchor" href="#a-note-on-example-code-used-in-analysismethodcodetemplate-using-cards-package"></a>
</h3>
<p>A powerful aspect of the ARS model, is that dynamic code can be
supplied as part of the metadata and be evaluated on either 1. the
Output level, 2. the Analysis level, or 3. the AnalysisMethod level (for
more information on this, see <a href="https://www.lexjansen.com/phuse-us/2025/ds/PAP_DS09.pdf" class="external-link">this</a>
PHUSE paper). The latter case is implemented by making use of the
<em>AnalysisMethodCodeTemplate</em> and
<em>AnalysisMethodCodeParameters</em> classes in the metadata. The user
supplies dynamic R code (with the option of making use of parameters
referring to metadata pieces), which will be executed to perform the
relevant AnalysisMethod operations.</p>
<p>For the example ARS metadata in Excel shipped with this package, the
R code used in the <em>AnalysisMethodCodeTemplate</em> is aligned with
the <em>cards</em> R package (more information <a href="https://insightsengineering.github.io/cards/latest-tag/" class="external-link">here</a>).
The <em>cards</em> package is a reputable R package consisting of
wrappers for various statistical functions, and producing results in a
consistent ARD format. Below is a simple example of how a function
<em>ard_continuous</em> from the <em>cards</em> package is used in the
<em>AnalysisMethodCodeTemplate</em> class in the accompanying Excel ARS
metadata example shipped with this package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example of 'cards' code in AnalysisMethodCodeTemplate, using the ard_continuous function:</span></span>
<span></span>
<span><span class="va">Analysis_ARD</span> <span class="op">=</span> <span class="fu">ard_continuous</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">filtered_ADSL</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">byvariables_here</span><span class="op">)</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">analysisvariable_here</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In the above example of <em>AnalysisMethodCodeTemplate</em> code for
a particular AnalysisMethod (summary statistics for a continuous
variable), the <em>ard_continuous</em> function from the <em>cards</em>
package is used. Notice, however, that two parameters are used in the
code:</p>
<ol style="list-style-type: decimal">
<li>‘byvariables_here’, and</li>
<li>‘analysisvariable_here’.</li>
</ol>
<p>These are example placeholder names, to be replaced by actual
variables, depending on the context for the Analysis. For example,
‘byvariables_here’ could be replaced by TRT01A, and
‘analysisvariable_here’ could be replaced by AGE, for an ARD with
summary statistics on AGE by Treatment. The same code, however, will be
reused for summary statistics on e.g. HEIGHT for another Analysis, and
the ‘analysisvariable_here’ will be replaced with HEIGHT. All this is
dynamically applied within the readARS_xl function when generating R
scripts using <em>siera</em>.</p>
<p>In order to facilitate the use of placeholders and their replacement
with actual values from the metadata, several “constructs” have been
defined in the <em>readARS_xl</em> function, and are available to the
user to call from the <em>AnalysisMethodCodeTemplate</em> and
<em>AnalysisMethodCodeParameters</em> classes in the metadata. These
constructs are either simple variables or datasets defined in the
metadata, or complex, dynamic constructs from various metadata pieces,
to be inserted in specific <em>cards</em> functions, or pre-processing
steps. A list of defined constructs and examples is shipped with this
package, and can be accessed with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ARS_example.html">ARS_example</a></span><span class="op">(</span><span class="st">"cards_constructs.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>The <em>readARS</em> function reads in a completed ARS metadata Excel
file, and generates R scripts for each Output defined in the file. Below
is an example of how this can be done using a ready-to-use ARS metadata
Excel file:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Path to the Excel ARS metadata file: </span></span>
<span><span class="va">ARS_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ARS_example.html">ARS_example</a></span><span class="op">(</span><span class="st">"Common_Safety_Displays_cards.xlsx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Path to a folder which will contain the Output meta-programmed R scripts (recommended to update</span></span>
<span><span class="co"># to a more suitable local path)</span></span>
<span><span class="va">output_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Path to the folder containing ADaM datasets in csv format (we will use temporary </span></span>
<span><span class="co"># directory tempdir() to make the code run in this vignette, but it's recommended to </span></span>
<span><span class="co"># 1. download the ADaMs required (csv ADSL and ADAE available using e.g. ARS_example("ADSL.csv"))</span></span>
<span><span class="co"># 2. store it in a folder (the directly downloaded location can be found using dirname(ARS_example("ADSL.csv")), for example.  Use this location, or manually store the ADaM somewhere else)</span></span>
<span><span class="co"># 3. use the folder path instead of tempdir() below.</span></span>
<span><span class="va">ADaM_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run the readARS function with these 3 parameters.  This creates R scripts </span></span>
<span><span class="co"># (1 for each Output in output_folder)</span></span>
<span><span class="fu"><a href="../reference/readARS.html">readARS</a></span><span class="op">(</span><span class="va">ARS_path</span>, <span class="va">output_folder</span>, <span class="va">ADaM_folder</span><span class="op">)</span></span></code></pre></div>
<p>If you’ve followed along so far, you should now have 5 R scripts
(named ARD_Out14-1-1.R, ARD_Out14-3-1-1.R, ARD_Out14-3-2-1.R,
ARD_Out14-3-3-1a.R, and ARD_Out14-3-3-1b.R) in the folder specified as
<em>output_folder</em>. If this is successful, you can execute any of
these 5 R scripts as-is (assuming the ADaM required for this script is
available in the <em>ADaM_folder</em>), and the result will be an ARD
(one result per row format) for each of the scripts. An example of such
an auto-generated ARD script is included in the package, and can be used
by using the <code>ARD_script_exampe</code> function. Running this
script will look like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Step 1: open ARD_xxx.R file</span></span>
<span><span class="co"># Step 2: Confirm the location of ADaM dataset(s) is correct in the code section "Load ADaM".  </span></span>
<span><span class="co"># For the sake of simplicity, the only update made to the ARD_Out14-1-1.R </span></span>
<span><span class="co"># script was to point to the ADaM folder to ARS_example("ADSL.csv")</span></span>
<span><span class="co"># Step 3: Run the code and enjoy automated analysis results generation. </span></span>
<span><span class="co"># Note: the ARD is contained in the object "df4" (which contains the appended)</span></span>
<span><span class="co"># mini-ARDs from all individual Analyses ARDs.</span></span>
<span></span>
<span><span class="va">example_ARD_script</span> <span class="op">=</span> <span class="fu"><a href="../reference/ARD_script_example.html">ARD_script_example</a></span><span class="op">(</span><span class="st">"ARD_Out14-1-1.R"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="va">example_ARD_script</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df4</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Malan Bosman, Clymb Clinical.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
